"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[549],{4549:function(t,s,e){e.r(s),e.d(s,{default:function(){return q}});var r=e(8683),n=e(5671),i=e(3144),o=e(136),a=e(5716),u=e(2791),p="ProfileInfo_descriptionBlock__+qpIC",l="ProfileInfo_picture__UIVjZ",c=e(6903),h=e(885),d=e(184),f=function(t){var s=t.updateUserStatus,e=t.status,r=(0,u.useState)(!1),n=(0,h.Z)(r,2),i=n[0],o=n[1],a=(0,u.useState)(e),p=(0,h.Z)(a,2),l=p[0],c=p[1];(0,u.useEffect)((function(){return c(e),function(){}}),[]);return(0,d.jsx)("div",{children:i?(0,d.jsx)("div",{children:(0,d.jsx)("input",{autoFocus:!0,value:l,onChange:function(t){c(t.currentTarget.value)},onBlur:function(){o(!1),s(l)}})}):(0,d.jsx)("div",{children:(0,d.jsx)("span",{onDoubleClick:function(){o(!0)},children:e||"no status"})})})},v=function(t){var s=t.profile,e=t.status,r=t.updateUserStatus,n=t.isOwner,i=t.savePhoto;if(!s)return(0,d.jsx)(c.p,{});return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:l,children:(0,d.jsx)("img",{src:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg",alt:"ava"})}),(0,d.jsxs)("div",{className:p,children:[(0,d.jsx)("img",{src:s.photos.large?s.photos.large:"https://shapka-youtube.ru/wp-content/uploads/2021/02/prikolnaya-avatarka-dlya-patsanov.jpg",alt:"ava"}),n&&(0,d.jsx)("input",{type:"file",onChange:function(t){var s;null!==(s=t.target.files)&&void 0!==s&&s.length&&i(t.target.files[0])}}),(0,d.jsx)("h3",{children:s.fullName}),(0,d.jsx)(f,{status:e,updateUserStatus:r}),(0,d.jsx)("p",{children:s.aboutMe})]})]})},j=e(81),m="MyPosts_postsBlock__uMDCx",x="MyPosts_posts__BNn+1",g="Post_item__rq7Xl",P=function(t){return(0,d.jsxs)("div",{className:g,children:[(0,d.jsx)("img",{src:"https://sm.ign.com/ign_nordic/cover/a/avatar-gen/avatar-generations_prsz.jpg"}),t.message,(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:"like"})," ",t.likesCount]})]})},_=e(6139),k=e(704),y=e(3079),U=e(7410),S=u.memo((function(t){var s=t.posts.map((function(t){return(0,d.jsx)(P,{message:t.message,likesCount:t.likesCount})}));return(0,d.jsxs)("div",{className:m,children:[(0,d.jsx)("h3",{children:"My posts"}),(0,d.jsx)(w,{onSubmit:function(s){t.addPost(s.newPostText)}}),(0,d.jsx)("div",{className:x,children:s})]})})),Z=(0,y.D)(10),w=(0,k.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,d.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,d.jsx)(_.Z,{name:"newPostText",component:U.g,placeholder:"Post message",validate:[y.l,Z]}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{children:"Add post"})})]})})),C=S,b=e(364),I=(0,b.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(s){t((0,j.Wl)(s))}}}))(C),N=function(t){var s=t.profile,e=t.status,r=t.updateUserStatus,n=t.isOwner,i=t.savePhoto;return(0,d.jsxs)("div",{children:[(0,d.jsx)(v,{isOwner:n,profile:s,status:e,updateUserStatus:r,savePhoto:i}),(0,d.jsx)(I,{})]})},A=e(9271),M=e(2163),D=e(7781),O=function(t){(0,o.Z)(e,t);var s=(0,a.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getUserStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s,e){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,d.jsx)("div",{children:(0,d.jsx)(N,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto}))})}}]),e}(u.Component),q=(0,D.qC)((0,b.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,isAuth:t.auth.isAuth,authorizedUserId:t.auth.id}}),{getUserProfile:j.et,getUserStatus:j.Tq,updateUserStatus:j.OL,savePhoto:j.Ju}),A.EN,M.e)(O)},2163:function(t,s,e){e.d(s,{e:function(){return l}});var r=e(8683),n=e(5987),i=(e(2791),e(9271)),o=e(364),a=e(184),u=["isAuth"],p=function(t){return{isAuth:t.auth.isAuth}};function l(t){return(0,o.$j)(p)((function(s){var e=s.isAuth,o=(0,n.Z)(s,u);return e?(0,a.jsx)(t,(0,r.Z)({},o)):(0,a.jsx)(i.l_,{to:"/login"})}))}}}]);
//# sourceMappingURL=549.cf9e9f6c.chunk.js.map